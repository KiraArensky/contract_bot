
# Telegram Bot: Служба по контракту

## Описание
Этот проект представляет собой Telegram-бота, созданного с использованием библиотеки `pyTelegramBotAPI`. Бот предоставляет пользователям меню для получения информации о социальных поддержках, инструкции по поступлению на военную службу, а также возможность менять регион. Он взаимодействует с базой данных SQLite для управления пользовательскими данными.

---

## Основные файлы
### 1. `main.py`
Главный файл проекта, в котором:
- Происходит инициализация бота.
- Реализованы обработчики команд и сообщений.
- Выполняется подключение к базе данных SQLite для хранения информации о пользователях.
- Обрабатываются callback-запросы от кнопок.

### 2. `posts.py`
Модуль вспомогательных функций, который отвечает за обработку ключевых действий бота:
- `support()`: Отображение категорий мер социальной поддержки.
- `how_join()`: Инструкция по поступлению на военную службу.
- `change_city()`: Изменение региона пользователя.

---

## Установка и настройка
1. **Клонирование репозитория**
   ```bash
   git clone <URL репозитория>
   cd <папка проекта>
   ```

2. **Установка зависимостей**
   Python-зависимости устанавливаются автоматически при первом запуске. Если требуется установить их вручную:
   ```bash
   pip install pyTelegramBotAPI requests
   ```

3. **Создание базы данных**
   Создайте файл `database/chats.db` и таблицу `id` с колонками:
   - `id` (INTEGER PRIMARY KEY) — уникальный идентификатор чата.
   - `key` (TEXT) — значение по умолчанию.
   - `back` (INTEGER) — ID предыдущего сообщения.
   - `menu_msg` (INTEGER) — ID сообщения меню.
   - `city` (TEXT) — текущий регион пользователя.
   - `post_number` (INTEGER) — текущий номер поста.
   - `old_post` (INTEGER) — ID старого поста.

   SQL-запрос для создания таблицы:
   ```sql
   CREATE TABLE id (
       id INTEGER PRIMARY KEY,
       key TEXT DEFAULT 'defolt',
       back INTEGER,
       menu_msg INTEGER,
       city TEXT,
       post_number INTEGER DEFAULT 0,
       old_post INTEGER
   );
   ```

4. **Добавление токена бота**
   В `main.py`, замените строку:
   ```python
   bot = telebot.TeleBot('')  # токен бота из BotFather
   ```
   Вставьте токен, полученный из BotFather.

5. **Создание файлов для постов**
   В папке `database/posts/` создайте текстовые файлы (`sup_1.txt`, `sup_2.txt`, и т.д.), где каждая строка содержит содержимое постов.

---

## Использование
1. Запустите бота:
   ```bash
   python main.py
   ```
2. В Telegram используйте команды:
   - `/start` — начать взаимодействие с ботом.
   - `/menu` — открыть главное меню.

---

## Функциональность
### Основные команды:
- **/start**: Регистрация нового пользователя и выбор региона.
- **/menu**: Доступ к основным функциям бота:
  - Как поступить на военную службу.
  - Меры соцподдержки.
  - Изменить регион.

### Callback-и:
- Взаимодействие с inline-кнопками для навигации и выбора опций.

### Управление базой данных:
- Хранение данных о пользователях, их текущих действиях и статусах.

---

## Возможные ошибки и решения
1. **Ошибка модуля**
   Если модуль `pyTelegramBotAPI` или `requests` не найден:
   ```bash
   pip install pyTelegramBotAPI requests
   ```

2. **Ошибка базы данных**
   Убедитесь, что:
   - Файл `database/chats.db` существует.
   - Таблица `id` создана с правильной структурой.
